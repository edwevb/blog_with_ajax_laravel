CodeMirror.defineMode("xml",function(t,e){var r=t.indentUnit,n=e.multilineTagIndentFactor||1,o=e.multilineTagIndentPastTag;null==o&&(o=!0);var a,i,l=e.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},u=e.alignCDATA;function d(t,e){function r(r){return e.tokenize=r,r(t,e)}var n=t.next();return"<"==n?t.eat("!")?t.eat("[")?t.match("CDATA[")?r(s("atom","]]>")):null:t.match("--")?r(s("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),r(function t(e){return function(r,n){for(var o;null!=(o=r.next());){if("<"==o)return n.tokenize=t(e+1),n.tokenize(r,n);if(">"==o){if(1==e){n.tokenize=d;break}return n.tokenize=t(e-1),n.tokenize(r,n)}}return"meta"}}(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=s("meta","?>"),"meta"):(a=t.eat("/")?"closeTag":"openTag",e.tokenize=c,"tag bracket"):"&"==n?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function c(t,e){var r,n,o=t.next();if(">"==o||"/"==o&&t.eat(">"))return e.tokenize=d,a=">"==o?"endTag":"selfcloseTag","tag bracket";if("="==o)return a="equals",null;if("<"==o){e.tokenize=d,e.state=h,e.tagName=e.tagStart=null;var i=e.tokenize(t,e);return i?i+" error":"error"}return/[\'\"]/.test(o)?(e.tokenize=(r=o,(n=function(t,e){for(;!t.eol();)if(t.next()==r){e.tokenize=c;break}return"string"}).isInAttribute=!0,n),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function s(t,e){return function(r,n){for(;!r.eol();){if(r.match(e)){n.tokenize=d;break}r.next()}return t}}function f(t,e,r){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=r,(l.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function m(t){t.context&&(t.context=t.context.prev)}function g(t,e){for(var r;;){if(!t.context)return;if(r=t.context.tagName,!l.contextGrabbers.hasOwnProperty(r)||!l.contextGrabbers[r].hasOwnProperty(e))return;m(t)}}function h(t,e,r){return"openTag"==t?(r.tagStart=e.column(),p):"closeTag"==t?x:h}function p(t,e,r){return"word"==t?(r.tagName=e.current(),i="tag",w):(i="error",p)}function x(t,e,r){if("word"==t){var n=e.current();return r.context&&r.context.tagName!=n&&l.implicitlyClosed.hasOwnProperty(r.context.tagName)&&m(r),r.context&&r.context.tagName==n?(i="tag",k):(i="tag error",b)}return i="error",b}function k(t,e,r){return"endTag"!=t?(i="error",k):(m(r),h)}function b(t,e,r){return i="error",k(t,0,r)}function w(t,e,r){if("word"==t)return i="attribute",C;if("endTag"==t||"selfcloseTag"==t){var n=r.tagName,o=r.tagStart;return r.tagName=r.tagStart=null,"selfcloseTag"==t||l.autoSelfClosers.hasOwnProperty(n)?g(r,n):(g(r,n),r.context=new f(r,n,o==r.indented)),h}return i="error",w}function C(t,e,r){return"equals"==t?v:(l.allowMissing||(i="error"),w(t,0,r))}function v(t,e,r){return"string"==t?M:"word"==t&&l.allowUnquoted?(i="string",w):(i="error",w(t,0,r))}function M(t,e,r){return"string"==t?M:w(t,0,r)}return{startState:function(){return{tokenize:d,state:h,indented:0,tagName:null,tagStart:null,context:null}},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;a=null;var r=e.tokenize(t,e);return(r||a)&&"comment"!=r&&(i=null,e.state=e.state(a||r,t,e),i&&(r="error"==i?r+" error":i)),r},indent:function(t,e,a){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+r;if(i&&i.noIndent)return CodeMirror.Pass;if(t.tokenize!=c&&t.tokenize!=d)return a?a.match(/^(\s*)/)[0].length:0;if(t.tagName)return o?t.tagStart+t.tagName.length+2:t.tagStart+r*n;if(u&&/<!\[CDATA\[/.test(e))return 0;var s=e&&/^<(\/)?(\w*)/.exec(e);if(s&&s[1])for(;i;){if(i.tagName==s[2]){i=i.prev;break}if(!l.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(s)for(;i;){var f=l.contextGrabbers[i.tagName];if(!f||!f.hasOwnProperty(s[2]))break;i=i.prev}for(;i&&!i.startOfLine;)i=i.prev;return i?i.indent+r:0},electricChars:"/",blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:e.htmlMode?"html":"xml",helperType:e.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});